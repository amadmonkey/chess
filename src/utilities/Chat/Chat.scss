@import '../../Variables.scss';

.chat-container {
    position: relative;
    width: 100%;
    height: 100%;
    max-width: 400px;
    overflow: hidden;
    border-radius: 30px;
    background-color: $chat-bg;
    box-shadow: 0 0 10px $board-dark;
    .user-info {
        height: 150px;
        box-shadow: 0 0 30px darken($chat-main, 10%) inset, 0 -10px 70px darken($chat-main, 10%);
        padding: 20px;
        box-sizing: border-box;
        background-color: $chat-main;
        z-index: 2;
        position: relative;
        .profile {
            text-align: center;
            position: absolute;
            top: 65%;
            left: 50%;
            font-size: 20px;
            transform: translate(-50%, -50%);
            > div:nth-child(2) {
                font-weight: 900;
                font-size: 30px;
                z-index: 2;
                position: relative;
            }
            > div:not(:nth-child(2)) {
                position: relative;
                padding: 5px 10px;
                border-radius: 20px;
                @include transition(0.1s ease-in-out);
                &.active {
                    z-index: 3;
                    font-size: 23px;
                    background-color: #78ff40;
                }
            }
            .user-nickname {
                display: inline;
                background-color: #79481f;
                .tag {
                    position: absolute;
                    top: 0px;
                    right: -40px;
                    font-size: 11px;
                    background: #dc4444;
                    padding: 5px;
                    border-radius: 4px;
                    font-weight: bold;
                    color: rgb(218, 218, 218);
                }
            }
            .opponent-nickname {
                padding: 5px 10px;
                background-color: #79481f;
                top: -10px;
                > div {
                    font-size: 11px;
                }
                .loading {
                    border-radius: 20px;
                    animation-duration: 2.2s;
                    animation-fill-mode: forwards;
                    animation-iteration-count: infinite;
                    animation-name: shimmer;
                    animation-timing-function: linear;
                    background: #E5F0FB;
                    background: linear-gradient(to right, transparent 20%, lighten($board-dark, 10%), transparent 50%);
                    background-size: 1200px 100%;
                    height: 25px;
                }
            }
        }
        .code-container {
            position: relative;
            display: inline-block;
            .code-input {
                border: 1px dashed darken($chat-main, 30%);
                color: darken($chat-main, 30%);
                border-radius: 20px;
                width: auto;
                text-align: center;
                width: 65px;
                font-size: 15px;
                background: none;
                text-align: right;
                padding-right: 21px;
                box-sizing: border-box;
            }
            svg {
                position: absolute;
                height: 15px;
                right: 5px;
                top: 25%;
                fill: darken($chat-main, 30%);
            }
        }
        .tools {
            position: absolute;
            right: 20px;
            top: 20px;
            margin: 0;
            line-height: 0.5;
            button {
                height: 20px;
                width: 20px;
                margin-left: 10px;
                padding: 0;
                background-color: transparent;
                border: none;
                cursor: pointer;
                &.logout {
                    color: red;
                }
                svg {
                    height: 100%;
                    fill: darken($chat-main, 30%);
                }
            }
        }
    }
    
    .chat-messages {
        position: absolute;
        bottom: 50px;
        list-style-type: none;
        margin: 0;
        padding: 10px;
        width: 100%;
        max-height: calc(100% - 200px);
        box-sizing: border-box;
        font-size: 14px;
        z-index: 1;
        overflow-y: auto;
        @include transition(0.2s ease-in-out);
        li {
            position: relative;
            width: 100%;
            margin: 10px 0;
            margin-bottom: 20px;
            line-height: 1.3;
            box-sizing: border-box;
            >.message-item {
                max-width: 70%;
                border-radius: 10px;
                padding: 15px 20px;
                display: inline-block;
                overflow-wrap: break-word;
                width: auto;
            }
            &:before {
                content: '';
                position: absolute;
                height: 20px;
                width: 20px;
                bottom: 2px;
                z-index: -1;
            }
            &.message-user {
                text-align: right;
                .message-item {
                    background-color: $chat-user-bg;
                    color: lighten($chat-user-bg, 40%);
                    box-shadow: 0 0 20px darken($chat-user-bg, 10%) inset;
                }
                &:before {
                    box-shadow: 0 0 100px darken($chat-user-bg, 10%) inset;
                    background-color: $chat-user-bg;
                    right: 5px;
                    transform: skew(10deg, 30deg);
                }
            }
            &.message-opponent {
                text-align: left;
                .message-item {
                    background-color: $chat-oppo-bg;
                    color: lighten($chat-oppo-bg, 40%);
                    box-shadow: 0 0 20px darken($chat-oppo-bg, 10%) inset;
                }
                &:before {
                    box-shadow: 0 0 100px darken($chat-oppo-bg, 20%) inset;
                    background-color: $chat-oppo-bg;
                    left: 5px;
                    transform: skew(-10deg, -30deg);
                }
            }
            &.message-game {
                text-align: center;
                border: 1px dashed #b5b5b5;
            }
        }
        // https://codepen.io/GhostRider/pen/GHaFw
        &::-webkit-scrollbar-track {
            // background-color: gray;
        }
        &::-webkit-scrollbar {
            width: 10px; // background-color: gray; 
        }
        &::-webkit-scrollbar-thumb { border-radius: 10px;
            -webkit-box-shadow: inset 0 0 3px $chat-main;
            box-shadow: inset 0 0 3px $chat-main;
            background-color: $chat-main;
        }
    }
    
    .chat-form {
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 60px;
        padding: 10px;
        box-sizing: border-box;
        .chat-input {
            background-color: $chat-input-bg;
            height: 100%;
            width: 100%;
            border: none;
            padding: 5px 20px;
            box-shadow: 0 0 10px darken($chat-input-bg, 10%) inset;
            border-radius: 20px;
            box-sizing: border-box;
            color: $chat-input-color;
            &::placeholder {
                color: #818181;
            }
        }
        .nickname {
            border: 0;
            padding: 10px;
            width: 10%;
            margin-right: 0.5%;
        }
        button {
            position: absolute;
            top: 50%;
            right: 35px;
            transform: translateY(-50%);
            padding: 0;
            margin: 0;
            height: 20px;
            background: none;
            border: none;
            width: 20px;
            svg {
                height: 100%;
                fill: $chat-bg;
            }
        }
    }
}
