@import '../../Variables.scss';

.chat-container {
    position: relative;
    height: 100%;
    width: 100%;
    max-width: 500px;
    border-radius: 11px;
    background-color: $chat-bg;
    box-shadow: 0 0 4px darken($white, 20%);
    transition: 0.2 ease-in-out;
    pointer-events: all;
    span { letter-spacing: unset; }
    .chat-messages {
        position: absolute;
        bottom: 50px;
        list-style-type: none;
        margin: 0;
        padding: 10px;
        width: 100%;
        max-height: calc(100% - 60px);
        box-sizing: border-box;
        font-size: 14px;
        z-index: 1;
        overflow-y: auto;
        border-radius: 10px;
        @include transition(0.2s ease-in-out);
        li {
            position: relative;
            margin: 10px;
            line-height: 1.3;
            box-sizing: border-box;
            .message-item {
                display: inline-block;
                max-width: 70%;
                border-radius: 10px;
                padding: 15px 20px;
                overflow-wrap: break-word;
                width: auto;
                .user-text {
                    color: #24af24;
                }
                .opponent-text {
                    color: #ff2d2d;
                }
                .neutral-text {
                    color: #7b7bff;
                }
                &:before {
                    content: '';
                    position: absolute;
                    height: 20px;
                    width: 20px;
                    bottom: 20px;
                    z-index: -1;
                }
            }
            &.message-user {
                display: flex;
                flex-direction: column;
                align-items: flex-end;
                .message-item {
                    background-color: $chat-user-bg;
                    color: lighten($chat-user-bg, 40%);
                    box-shadow: 0 0 20px darken($chat-user-bg, 10%) inset;
                    &:before {
                        box-shadow: 0 0 100px darken($chat-user-bg, 10%) inset;
                        background-color: $chat-user-bg;
                        right: 5px;
                        transform: skew(10deg, 30deg);
                    }
                }
                .time-ago {
                    margin-top: 5px;
                }
            }
            &.message-opponent {
                display: flex;
                flex-direction: column;
                align-items: flex-start;
                .message-item {
                    background-color: $chat-oppo-bg;
                    color: lighten($chat-oppo-bg, 40%);
                    box-shadow: 0 0 20px darken($chat-oppo-bg, 10%) inset;
                    &:before {
                        box-shadow: 0 0 100px darken($chat-oppo-bg, 20%) inset;
                        background-color: $chat-oppo-bg;
                        left: 5px;
                        transform: skew(-10deg, -30deg);
                    }
                }
                .time-ago {
                    margin-top: 5px;
                }
            }
            &.message-game {
                text-align: center;
                font-size: 14px;
                color: #efc579;
                .message-item {
                    max-width: 100%;
                    display: flex;
                    justify-content: center;
                    flex-wrap: wrap;
                    align-items: center;
                    text-shadow: 0 0 1px rgb(107, 107, 107);
                    padding: 3px;
                    gap: 3px;
                    .time-ago {
                        margin-top: 5px;
                    }
                }
                svg {
                    height: 20px;
                    width: unset;
                    filter: drop-shadow(0px 3px 2px #636363);
                }
            }
            .time-ago {
                font-size: 12px;
                color: darken($white, 30%);
            }
        }
        // https://codepen.io/GhostRider/pen/GHaFw
        &::-webkit-scrollbar-track {
            background-color: gray;
        }
        &::-webkit-scrollbar {
            width: 10px; // background-color: gray; 
        }
        &::-webkit-scrollbar-thumb { border-radius: 10px;
            -webkit-box-shadow: inset 0 0 3px rgb(192, 192, 192);
            box-shadow: inset 0 0 3px rgb(192, 192, 192);
            background-color: rgb(192, 192, 192);
        }
    }
    
    .chat-form {
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 70px;
        padding: 10px;
        box-sizing: border-box;
        .chat-input {
            background-color: lighten($chat-input-bg, 10%);
            height: 100%;
            width: 100%;
            border: none;
            padding: 5px 20px;
            padding-right: 50px;
            box-shadow: 0 0 10px darken($chat-input-bg, 10%) inset;
            border-radius: 7px;
            box-sizing: border-box;
            letter-spacing: unset;
            color: $chat-input-color;
            &::placeholder {
                color: #818181;
            }
        }
        .nickname {
            border: 0;
            padding: 10px;
            width: 10%;
            margin-right: 0.5%;
        }
        button {
            position: absolute;
            top: 50%;
            right: 35px;
            transform: translateY(-50%);
            padding: 0;
            margin: 0;
            height: 20px;
            background: none;
            border: none;
            width: 20px;
            svg {
                height: 100%;
                fill: $chat-bg;
            }
        }
    }

    @include for-tablet-landscape-up {
        height: 100%;
        pointer-events: all;
        .chat-messages,
        .chat-form {
            opacity: 1;
        }
    }
    
    &.hidden {
        height: 0;
        pointer-events: none;
        .chat-messages,
        .chat-form {
            opacity: 0;
        }
    }
    #typing {
        color: rgb(97, 97, 97);
    }
}
